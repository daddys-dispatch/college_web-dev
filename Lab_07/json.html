<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>JSON/CSV & Hash Tool</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
		<style>
			body {
				font-family: Arial;
				background: white;
				margin: 0;
				padding: 20px;
			}
			.box {
				max-width: 700px;
				margin: auto;
				background: white;
				padding: 15px;
				border-radius: 6px;
				box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
			}
			h3 {
				margin: 10px 0;
				font-size: 1rem;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}
			textarea {
				width: 100%;
				height: 80px;
				margin: 5px 0;
			}
			button {
				background: green;
				color: white;
				border: none;
				padding: 6px 10px;
				border-radius: 4px;
				cursor: pointer;
				font-size: 0.9rem;
			}
			button:hover {
				background: darkgreen;
			}
			#result {
				background: lightgray;
				margin-top: 12px;
				padding: 8px;
				border-radius: 4px;
				white-space: pre-wrap;
			}
		</style>
	</head>
	<body>
		<div class="box">
			<h2>JSON/CSV Converter and Hash Geneator</h2>
			<h3>
				a) JSON → Object / Date / CSV
				<span>
					<button onclick="toObject()">Object</button>
					<button onclick="toDate()">Date</button>
					<button onclick="jsonToCsv()">CSV</button>
				</span>
			</h3>
			<textarea id="jsonInput" placeholder="Enter JSON here"></textarea>

			<h3>
				b) CSV → JSON
				<button onclick="csvToJson()">Convert</button>
			</h3>
			<textarea id="csvInput" placeholder="Enter CSV here"></textarea>

			<h3>
				c) String → Hash
				<button onclick="createHash()">Generate</button>
			</h3>
			<textarea id="hashInput" placeholder="Enter String here"></textarea>

			<div id="result"></div>
		</div>

		<script>
			const out = (msg) =>
				(document.getElementById("result").innerText = msg);

			function toObject() {
				try {
					out(
						"Object:\n" +
							JSON.stringify(JSON.parse(jsonInput.value), null, 2)
					);
				} catch (e) {
					out("Error: " + e.message);
				}
			}

			function toDate() {
				try {
					const d = new Date(JSON.parse(jsonInput.value).date);
					out("Date: " + d.toString());
				} catch (e) {
					out("Error: " + e.message);
				}
			}

			function jsonToCsv() {
				try {
					const a = JSON.parse(jsonInput.value),
						h = Object.keys(a[0]);
					const csv = [
						h.join(","),
						...a.map((r) =>
							h.map((k) => JSON.stringify(r[k] || "")).join(",")
						),
					].join("\n");
					out("CSV:\n" + csv);
				} catch (e) {
					out("Error: " + e.message);
				}
			}

			function csvToJson() {
				try {
					const l = csvInput.value.trim().split("\n"),
						h = l[0].split(",");
					const j = l.slice(1).map((r) => {
						const v = r.split(",");
						return h.reduce((o, k, i) => ((o[k] = v[i]), o), {});
					});
					out("JSON:\n" + JSON.stringify(j, null, 2));
				} catch (e) {
					out("Error: " + e.message);
				}
			}

			function createHash() {
				try {
					out(
						"SHA-256:\n" +
							CryptoJS.SHA256(hashInput.value).toString()
					);
				} catch (e) {
					out("Error: " + e.message);
				}
			}
		</script>
	</body>
</html>
